<?php
use tpfcore\Core;
?>
<?php if(!isset($addons_data['has_more'])){?>
<script type="text/javascript" charset="utf-8" src="{$static_path}/ueditor/ueditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="{$static_path}/ueditor/ueditor.all.min.js"> </script>
<script type="text/javascript" charset="utf-8" src="{$static_path}/ueditor/ueditor.ui.js"></script>

<!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
<!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
<script type="text/javascript" charset="utf-8" src="{$static_path}/ueditor/lang/zh-cn/zh-cn.js"></script>
<style type="text/css">#edui1_wordcount{border-left:none;}</style>
<?php }?>
<script id="{$addons_data['name']|default='content'}" type="text/plain" name="{$addons_data['name']|default='content'}">{$addons_data['default_str']|default=''}</script>
<!-- 用textarea标签加载会导致编辑丢失html代码 -->
<script type="text/javascript">
// /backend/addon/execute/m/ueditor/c/upload/a/uploads
UE.getEditor('{$addons_data['name']|default='content'}',{
    serverUrl :"{:url('ueditor/upload/uploads')}",
    textarea:"{$addons_data['name']|default='content'}",
    initialFrameWidth :"{$addons_data['width']|default=$addons_config['editor_width']}",
    initialFrameHeight  :"{$addons_data['height']|default=$addons_config['editor_height']}",
    {notempty name="$addons_data['toolbars']"}
    toolbars:[
        <?php
        if(!is_array($addons_data['toolbars'][0])){
        ?>
        [{volist name="$addons_data['toolbars']" id="vo"}
        '{$vo}',
        {/volist}
        ]
        <?php
        }else{
        for($j=0;$j<count($addons_data['toolbars']);$j++){
        ?>
        [{volist name="$addons_data['toolbars'][$j]" id="vo"}'{$vo}',{/volist}],
        <?php }}?>
    ]
    {/notempty}
});
</script>
